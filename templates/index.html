<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="">
    <meta name="viewport" content="width=device-width">
    <title>Just Share</title>
    <link rel="icon" href="/static/assets/favicon.svg" type="image/svg">
    <meta name="description" content="Share files and text instantly and securely without logins or pop-ups. Experience the easiest way to collaborate online with our hassle-free sharing website. Try it now!">
    <meta property="og:title" content="Just Share">
    <meta property="og:description" content="Share text and files instantly without logins or pop-ups.">
    <meta property="og:image" content="/static/assets/og-image.svg">
    <meta property="og:image:width" content="630">
    <meta property="og:image:height" content="315">
    <meta property="og:url" content="https://justshare.dhanush.online/">
    <meta property="og:type" content="website">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header>
    <div class="title">
      <h1><span id="justShare">JUST SHARE</span></h1>
    </div>
  </header>
  <div class="content-s-r bluer">
  <div class="content-s">
    <div class="console">
      <form id="sendForm">
          <div class="label" label for="message">Enter your text</label><br>
            <textarea id="message" name="message" rows="4" cols="50"></textarea><br>
            <div class="receive-button">
            <input type="submit" value="Send" class="send-button">
          </div>
        </div>
      </form>
      </div>
    </div>
    <div class="Receive-continer">
      <div>
        <div class="content-r">
          <div class="console">
    <h1 class="label">Receive</h1>
    <form id="receiveForm">
      <label id="user-info" class="user-name" for="username">Username</label>
      <input type="text" id="username" name="username" autocomplete="off">
      <label id="user-info" class="user-pin" for="pin">PIN</label>
      <input type="text" id="pin" name="pin" autocomplete="off">
      <div class="receive-button">
          <input type="submit" value="Receive" class="send-button">
      </div>
  </form>
</div>
</div>
</div>
</div>
</div>
<div class="output" id="outputContainer" style="display: none;">
  <div class="popup-bg">
      <div class="popup-field">
          <div class="popup-1">
              <button class="close">X</button>
              <div class="user-info">
                  <p class="username">Username: <span id="usernameValue"></span></p>
                  <p class="pin">PIN: <span id="pinValue"></span></p>
              </div>
              <div class="copy-icons">
                  <a class="copy-icon" onclick="copyUsername(this)">
                      <img src="/static/assets/clipboard.png" alt="Copy">
                      <span class="copy-text">Copy Username</span>
                  </a>
                  <a class="copy-icon" onclick="copyPin(this)">
                      <img src="/static/assets/clipboard.png" alt="Copy">
                      <span class="copy-text">Copy PIN</span>
                  </a>
              </div>
              <div class="qr-code">
                  <div class="label-qr">QR Code</div>
                  <div class="label-qr-sub">Scan using your mobile:</div>
                  <img id="qrCodeImage" src="" alt="QR Code">
            </div>
          </div>
      </div>
  </div>
</div>


<div class="output-2" id="outputContainer2" style="display: none;">
  <div class="popup-bg">
      <div class="popup">
          <button class="close-1">X</button>
          <p class="error">Error <span id="errorvalue"></span></p>
      </div>
  </div>
</div>

<div class="output-3" id="outputContainer3" style="display: none;">
  <div class="popup-bg">
      <div class="popup">
          <button class="close-1" onclick="closePopup()">X</button>
          <h1 class="message-h1">Data</h1>
          <div class="scrollable">
              <p class="message-out"><span id="datavalue"></span></p>
          </div>
          <a class="copy-icon" onclick="copydata(this)"><img src="/static/assets/clipboard.png" alt="Copy"><span class="copy-text"></span></a>
      </div>
  </div>
</div>
</div>
</div>
     <footer id="footer">
      <div class="footer-content">
        <div id="copyright" class="footer-content bottom-left">
          <p>Â© MIT.</p>
          <p>Powered by the Admin</p>
        </div>
      
        <div id="call" class="footer-content center">
          <p>Call</p>
          <p>+91 8248417774</p>
        </div>
      
        <div id="write" class="footer-content center">
          <p>Write</p>
          <p>dhanush@tutanota.de</p>
        </div>
      
        <div id="follow" class="footer-content bottom-right">
          <p>Follow</p>
          <div class="social-icons">
            <a href="https://github.com/dhanushl0l"><img src="/static/assets/github.png" alt="github"></a>
            <a href="https://twitter.com/dhanu_off"><img src="/static/assets/twitter.png" alt="Twitter"></a>
            <a href="https://www.linkedin.com/in/dhanush-a506b6297/"><img src="/static/assets/lin.png" alt="LinkedIn"></a>
            <a href="https://www.instagram.com/i_am_the_bad.one/"><img src="/static/assets/instagram.png" alt="Instagram"></a>
        </div>    
        </div>
      </div>
      </footer>
<script>
  const username = "{{ username }}";
  const pin = "{{ pin }}";
  const error = "{{ error }}";
  const message = "{{ message }}";

  const outputContainer = document.getElementById('outputContainer');
  const outputContainer2 = document.getElementById('outputContainer2');
  const outputContainer3 = document.getElementById('outputContainer3');
  const usernameValue = document.getElementById('usernameValue');
  const pinValue = document.getElementById('pinValue');

  if (username && pin) {
    outputContainer.style.display = 'block';
    usernameValue.textContent = username;
    pinValue.textContent = pin;
  } else {
    outputContainer.style.display = 'none';
  }

  if (error) {
    outputContainer2.style.display = 'block';
  } else {
    outputContainer2.style.display = 'none';
  }

  if (message) {
    outputContainer3.style.display = 'block';
  } else {
    outputContainer3.style.display = 'none';
  }

  document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('receiveForm').addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent the form from submitting the traditional way

                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/receive', true);
                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

                xhr.onload = function() {
                    if (xhr.status === 200) {
                        var response = JSON.parse(xhr.responseText);
                        if (response.error_message) {
                            document.getElementById('errorvalue').textContent = response.error_message;
                            document.getElementById('outputContainer2').style.display = 'block';
                            document.getElementById('outputContainer3').style.display = 'none';
                        } else if (response.message) {
                            document.getElementById('datavalue').textContent = response.message;
                            document.getElementById('outputContainer3').style.display = 'block';
                            document.getElementById('outputContainer2').style.display = 'none';
                        }
                    }
                };

                var username = document.getElementById('username').value;
                var pin = document.getElementById('pin').value;
                var params = 'username=' + encodeURIComponent(username) + '&pin=' + encodeURIComponent(pin);
                xhr.send(params);
            });
        });

        function copydata(element) {
            var text = document.getElementById('datavalue').textContent;
            navigator.clipboard.writeText(text).then(function() {
                element.querySelector('.copy-text').textContent = 'Copied!';
            }, function(err) {
                console.error('Could not copy text: ', err);
            });
        }

        






        document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('sendForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the form from submitting the traditional way

        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/send', true);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

        xhr.onload = function() {
            if (xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);
                if (response.error_message) {
                    document.getElementById('errorvalue').textContent = response.error_message;
                    document.getElementById('outputContainer2').style.display = 'block';
                    document.getElementById('outputContainer3').style.display = 'none';
                } else if (response.username && response.pin && response.qr_code_link) {
                    document.getElementById('usernameValue').textContent = response.username;
                    document.getElementById('pinValue').textContent = response.pin;
                    document.getElementById('qrCodeImage').src = response.qr_code_link;
                    document.getElementById('outputContainer').style.display = 'block';
                }
            }
        };

        var message = document.getElementById('message').value;
        var params = 'message=' + encodeURIComponent(message);
        xhr.send(params);
    });
});
</script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
